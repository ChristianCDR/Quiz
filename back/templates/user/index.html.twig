{% extends 'base.html.twig' %}

{% block title %}Gestion Utilisateur{% endblock %}

{% block body %}

    <h1 class="text-xl text-center font-bold mt-5">Gestion Utilisateur</h1>

    <a class="block w-11/12 m-auto my-5" href="{{ path('app_register') }}">
        <svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 32 32"><path fill="#334155" d="M16 3C8.832 3 3 8.832 3 16s5.832 13 13 13s13-5.832 13-13S23.168 3 16 3m0 2c6.087 0 11 4.913 11 11s-4.913 11-11 11S5 22.087 5 16S9.913 5 16 5m-1 5v5h-5v2h5v5h2v-5h5v-2h-5v-5z"/></svg>
    </a>

    <div class="relative overflow-x-auto shadow-md sm:rounded-lg w-11/12 m-auto">

        <table class="table w-full text-sm text-left text-gray-500 dark:text-gray-400">
            <thead class="uppercase dark:text-gray-400">
                <tr>
                    <th scope="col" class="px-6 py-3 bg-slate-700">Id</th>
                    <th scope="col" class="px-6 py-3 bg-slate-600">Email</th>
                    <th scope="col" class="px-6 py-3 bg-slate-700 ">Roles</th>
                    <th scope="col" class="px-6 py-3 bg-slate-600">Actions</th>
                </tr>
            </thead>
            <tbody>
            {% for user in users %}
                <tr class="border-b border-gray-200">
                    <td scope="row" class="px-6 py-3 bg-slate-700">{{ user.id }}</td>
                    <td scope="row" class="px-6 py-3 bg-slate-600">{{ user.email }}</td>
                    <td scope="row" class="px-6 py-3 bg-slate-700">{{ user.roles ? user.roles|json_encode : '' }}</td>
                    <td scope="row" class=" flex px-6 py-3 bg-slate-600">
                        <a href="{{ path('app_user_edit', {'id': user.id}) }}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 20 20"><g fill="#f6d32d"><path fill-rule="evenodd" d="M13.198 1.22L3.12 11.298a1 1 0 0 0-.282.555l-.705 4.594a1 1 0 0 0 1.14 1.14l4.595-.705a1 1 0 0 0 .555-.281L18.501 6.523a1 1 0 0 0 0-1.414l-3.89-3.89a1 1 0 0 0-1.413 0M4.317 15.404l.448-2.924l9.14-9.14l2.475 2.476l-9.14 9.14z" clip-rule="evenodd"/><path d="m11.442 5.247l1.06-1.061l3.242 3.24l-1.061 1.061z"/></g></svg>
                        </a>
                    
                        {{ include('user/_delete_form.html.twig') }}
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="5">Aucun utilisateur trouv√©</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
